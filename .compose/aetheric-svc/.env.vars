## DO NOT EDIT!
# This file was provisioned by OpenTofu
# File origin: https://github.com/aetheric-oss/tofu-github/tree/main/src/modules/vars/templates/rust/svc/.compose/aetheric-svc/.env.vars


# -----------------------------------------------------------
# General settings
# -----------------------------------------------------------
DOCKER_PORT_REST=8000
DOCKER_PORT_GRPC=50051
LOG_CONFIG=/log4rs.yaml

# -----------------------------------------------------------
# Rest server settings
# -----------------------------------------------------------
REST_CONCURRENCY_LIMIT_PER_SERVICE=5
REST_REQUEST_LIMIT_PER_SECOND=2
REST_CORS_ALLOWED_ORIGIN=http://localhost:3000 # 3000 = default nuxt dev listen port

# -----------------------------------------------------------
# Services will be connecting to dependencies through the internal docker network, so we can use their docker port
# -----------------------------------------------------------
%{ for key, repo in svc_repos }
${upper(replace(key, "-", "_"))}_PORT_GRPC=${DOCKER_PORT_GRPC}
%{ endfor }
%{ for key, repo in api_repos }
${upper(replace(key, "-", "_"))}_PORT_GRPC=${DOCKER_PORT_GRPC}
%{ endfor }

# -----------------------------------------------------------
# Host names for our realm services
# -----------------------------------------------------------
%{ for key, repo in svc_repos }
${upper(replace(key, "-", "_"))}_HOST_GRPC=svc-${key}
%{ endfor }
%{ for key, repo in api_repos }
${upper(replace(key, "-", "_"))}_HOST_GRPC=svc-${key}
%{ endfor }

# -----------------------------------------------------------
# Rabbitmq Settings
# -----------------------------------------------------------
AMQP__URL=amqp://aetheric-queue:5672
AMQP__POOL__MAX_SIZE=16
AMQP__POOL__TIMEOUTS__WAIT__SECS=2
AMQP__POOL__TIMEOUTS__WAIT__NANOS=0

# -----------------------------------------------------------
# Redis/Valkey Settings
# -----------------------------------------------------------
REDIS__URL=redis://aetheric-cache:6379
REDIS__POOL__MAX_SIZE=16
REDIS__POOL__TIMEOUTS__WAIT__SECS=2
REDIS__POOL__TIMEOUTS__WAIT__NANOS=0
